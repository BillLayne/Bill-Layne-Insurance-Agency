<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Auto & Home Insurance in North Carolina | Bill Layne Insurance Agency in Elkin</title>
    <meta name="description" content="Compare auto & home insurance from Travelers, Progressive, Nationwide & 10+ top carriers in Elkin NC. Save an average of $847/year. Trusted local agency serving Surry County. Call (336) 835-1993.">

    <!-- SEO Meta Tags -->
    <link rel="canonical" href="https://www.billlayneinsurance.com/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Auto & Home Insurance in North Carolina | Bill Layne Insurance">
    <meta property="og:image" content="https://www.billlayneinsurance.com/images/bill-layne-insurance-logo.png">
    <meta property="og:url" content="https://www.billlayneinsurance.com/">
    <meta property="og:description" content="Local Elkin agency shopping 10+ carriers to find you the best rate.">

    <!-- Preload Critical Images -->
    <link rel="preload" as="image" href="https://raw.githubusercontent.com/BillLayne/bill-layne-images/617faee947d0b12e42abfd584cd1e9a473c55444/logos/family%20image%20photo.webp">
    <link rel="preload" as="image" href="https://i.imgur.com/c7nJZmf.jpeg">

    <!-- Local SEO Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "InsuranceAgency",
      "name": "Bill Layne Insurance Agency",
      "image": "https://www.billlayneinsurance.com/images/bill-layne-insurance-logo.png",
      "url": "https://www.billlayneinsurance.com/",
      "telephone": "+13368351993",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "1283 N Bridge St",
        "addressLocality": "Elkin",
        "addressRegion": "NC",
        "postalCode": "28621",
        "addressCountry": "US"
      },
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 36.2476,
        "longitude": -80.8512
      },
      "openingHoursSpecification": {
        "@type": "OpeningHoursSpecification",
        "dayOfWeek": ["Monday", "Tuesday", "Wednesday", "Thursday", "Friday"],
        "opens": "09:00",
        "closes": "17:00"
      },
      "areaServed": ["Elkin", "Mount Airy", "Jonesville", "Wilkesboro", "Surry County", "North Carolina"],
      "priceRange": "$$",
      "sameAs": [
        "https://www.facebook.com/dollarbillagency/",
        "https://www.youtube.com/@ncautoandhome",
        "https://x.com/shopsavecompare",
        "https://www.instagram.com/ncautoandhome/"
      ]
    }
    </script>
    
    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;800&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: { 
                        sans: ['Inter', 'sans-serif'],
                        display: ['Outfit', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#eef2ff', 100: '#e0e7ff', 400: '#818cf8', 500: '#6366f1',
                            600: '#4f46e5', 700: '#4338ca', 900: '#312e81',
                        },
                        accent: {
                            50: '#fffbeb', 100: '#fef3c7', 200: '#fde68a', 300: '#fcd34d',
                            400: '#fbbf24', 500: '#f59e0b', 600: '#d97706', 700: '#b45309',
                        }
                    },
                    animation: {
                        'blob': 'blob 10s infinite',
                        'float': 'float 6s ease-in-out infinite',
                        'marquee': 'marquee 40s linear infinite',
                        'pulse-glow': 'pulse-glow 3s infinite',
                    },
                    keyframes: {
                        blob: {
                            '0%': { transform: 'translate(0px, 0px) scale(1)' },
                            '33%': { transform: 'translate(30px, -50px) scale(1.1)' },
                            '66%': { transform: 'translate(-20px, 20px) scale(0.9)' },
                            '100%': { transform: 'translate(0px, 0px) scale(1)' },
                        },
                        float: {
                            '0%, 100%': { transform: 'translateY(0)' },
                            '50%': { transform: 'translateY(-15px)' },
                        },
                        marquee: {
                            '0%': { transform: 'translateX(0)' },
                            '100%': { transform: 'translateX(-50%)' },
                        },
                        'pulse-glow': {
                            '0%, 100%': { opacity: '1', transform: 'scale(1)' },
                            '50%': { opacity: '0.8', transform: 'scale(1.05)' },
                        }
                    }
                }
            }
        }
    </script>
    <style>
        body { -webkit-tap-highlight-color: transparent; }
        .glass-nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(16px);
            -webkit-backdrop-filter: blur(16px);
            border-bottom: 1px solid rgba(255,255,255,0.5);
        }
        .bg-vivid-hero {
            background: radial-gradient(circle at top right, #4f46e5, #312e81);
        }
        .reveal { opacity: 0; transform: translateY(20px); transition: all 0.8s cubic-bezier(0.5, 0, 0, 1); }
        .reveal.active { opacity: 1; transform: translateY(0); }
        .glass-dark { background: rgba(15, 23, 42, 0.6); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        
        .btn-shine {
            position: relative;
            overflow: hidden;
        }
        .btn-shine::after {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 50%;
            height: 100%;
            background: linear-gradient(to right, transparent, rgba(255,255,255,0.3), transparent);
            transform: skewX(-25deg);
            animation: shine 4s infinite;
        }
        @keyframes shine {
            0% { left: -100%; }
            20% { left: 200%; }
            100% { left: 200%; }
        }
        .chat-open { transform: scale(1) translateY(0); opacity: 1; pointer-events: auto; }
        .chat-closed { transform: scale(0.95) translateY(20px); opacity: 0; pointer-events: none; }
        .accordion-content { transition: max-height 0.3s ease-out, opacity 0.3s ease-out; max-height: 0; opacity: 0; overflow: hidden; }
        .accordion-content.open { opacity: 1; }
        .pb-safe { padding-bottom: env(safe-area-inset-bottom); }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 font-sans selection:bg-primary-100 overflow-x-hidden">

    <!-- NAVBAR -->
    <nav id="navbar" class="fixed w-full z-50 transition-all duration-300 top-0 h-24 bg-transparent">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-full">
            <div class="flex justify-between items-center h-full">
                <a href="index.html" class="flex flex-col leading-none group relative z-50">
                    <span id="logo-text" class="text-2xl font-display font-extrabold tracking-tight transition-colors text-white">
                        Bill Layne <span id="logo-accent" class="text-accent-400">Insurance</span>
                    </span>
                    <span id="logo-tagline" class="text-[10px] font-bold uppercase tracking-widest mt-1 transition-colors text-indigo-200">
                        North Carolina's Trusted Agency
                    </span>
                </a>

                <div class="flex items-center gap-4">
                    <a id="nav-phone" href="tel:3368351993" class="hidden md:flex items-center font-bold text-slate-700 hover:text-primary-600 transition-colors bg-white px-5 py-2.5 rounded-full shadow-sm border border-slate-100 text-sm relative">
                        <span id="status-dot" class="absolute top-2 right-2 w-2 h-2 rounded-full bg-green-500 animate-pulse hidden"></span>
                        <i class="fas fa-phone-alt mr-2 text-primary-500"></i>(336) 835-1993
                    </a>
                    <a href="https://billlayneinsurance.com/get-quote" class="hidden md:block bg-gradient-to-r from-primary-600 to-indigo-600 hover:from-primary-700 hover:to-indigo-700 text-white px-7 py-2.5 rounded-full text-sm font-bold shadow-lg shadow-primary-500/30 transition-all hover:scale-105 active:scale-95 btn-shine">
                        Get Free Quote
                    </a>
                    <button id="menu-btn" class="p-3 rounded-full transition-colors focus:outline-none hover:bg-white/10 text-white" aria-label="Open Menu">
                        <div class="w-6 h-5 flex flex-col justify-between relative">
                            <span class="hamburger-line w-full h-0.5 rounded-full transition-all duration-300 bg-white"></span>
                            <span class="hamburger-line w-full h-0.5 rounded-full transition-all duration-300 bg-white"></span>
                            <span class="hamburger-line w-full h-0.5 rounded-full transition-all duration-300 bg-white"></span>
                        </div>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- MOBILE DRAWER -->
    <div id="menu-overlay" class="fixed inset-0 bg-slate-900/60 z-[60] backdrop-blur-sm transition-opacity duration-300 opacity-0 pointer-events-none"></div>
    <div id="menu-drawer" class="fixed top-0 right-0 w-80 max-w-full h-full bg-white z-[70] shadow-2xl transform translate-x-full transition-transform duration-300 flex flex-col">
        <div class="p-6 flex justify-between items-center border-b border-slate-100">
            <h3 class="text-lg font-display font-bold text-slate-900">Menu</h3>
            <button id="menu-close" class="w-8 h-8 flex items-center justify-center rounded-full bg-slate-50 text-slate-500 hover:bg-slate-100 transition-colors">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="flex-1 overflow-y-auto p-4 space-y-1">
            <a href="index.html" class="block p-3 rounded-xl bg-primary-50 text-primary-700 font-bold flex items-center gap-3"><i class="fas fa-home w-6"></i> Home</a>
            <a href="https://billlayne.github.io/Auto-Insurance-Center/" class="block p-3 rounded-xl hover:bg-slate-50 text-slate-600 font-medium flex items-center gap-3"><i class="fas fa-car w-6 text-blue-500"></i> Auto Insurance</a>
            <a href="https://billlayne.github.io/NC-Home-Insurance.github.io/" class="block p-3 rounded-xl hover:bg-slate-50 text-slate-600 font-medium flex items-center gap-3"><i class="fas fa-home w-6 text-green-500"></i> Home Insurance</a>
            <a href="https://billlayne.github.io/NC-Insurance-Claims-Center.github.io/" class="block p-3 rounded-xl hover:bg-slate-50 text-slate-600 font-medium flex items-center gap-3"><i class="fas fa-file-medical-alt w-6 text-red-500"></i> Claims Center</a>
            <a href="contact-us.html" class="block p-3 rounded-xl hover:bg-slate-50 text-slate-600 font-medium flex items-center gap-3"><i class="fas fa-envelope w-6 text-slate-400"></i> Contact Us</a>
        </div>
        <div class="p-6 border-t border-slate-100 bg-slate-50">
            <a href="tel:3368351993" class="block w-full py-4 bg-slate-900 text-white text-center rounded-xl font-bold shadow-lg">Call Agent Now</a>
        </div>
    </div>

    <!-- HERO SECTION -->
    <section id="home" class="relative pt-32 pb-20 lg:pt-48 lg:pb-32 overflow-hidden bg-vivid-hero text-white min-h-[90vh] flex items-center">
        <div class="absolute top-[-20%] left-[-10%] w-[80%] h-[60%] bg-purple-500 rounded-full blur-[100px] opacity-40 animate-blob"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-[80%] h-[60%] bg-blue-500 rounded-full blur-[100px] opacity-40 animate-blob" style="animation-delay: 2s;"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 relative z-10 w-full">
            <div class="grid lg:grid-cols-2 gap-12 items-center">
                <div class="text-center lg:text-left reveal active">
                    <div class="inline-flex items-center gap-2 px-4 py-2 rounded-full bg-white/10 backdrop-blur-md border border-white/20 text-white/90 text-xs font-bold uppercase tracking-wider mb-8">
                        <i class="fas fa-star text-yellow-400"></i> 4.9/5 Rating â€¢ NC Local Agency
                    </div>
                    <h1 class="text-5xl md:text-6xl lg:text-7xl font-display font-extrabold leading-[1.1] mb-6 drop-shadow-2xl">
                        Smart Savings.<br>
                        <span class="text-transparent bg-clip-text bg-gradient-to-r from-accent-400 via-accent-300 to-accent-200">Better Coverage.</span>
                    </h1>
                    <p class="text-lg md:text-xl text-indigo-100 mb-10 max-w-xl mx-auto lg:mx-0 font-medium leading-relaxed drop-shadow-lg">
                        Families in North Carolina <strong>can save $847/year</strong> by letting us shop 10+ top carriers like Travelers & Progressive.
                    </p>
                    <div class="flex flex-col sm:flex-row gap-4 justify-center lg:justify-start">
                        <a href="https://billlayneinsurance.com/get-quote" class="inline-flex justify-center items-center px-8 py-4 text-lg font-bold rounded-full text-indigo-900 bg-white hover:bg-indigo-50 shadow-xl transition-all hover:scale-105 btn-shine">
                            Get My Free Quote <i class="fas fa-arrow-right ml-2 text-indigo-600"></i>
                        </a>
                        <a href="tel:3368351993" class="inline-flex justify-center items-center px-8 py-4 text-lg font-bold rounded-full text-white bg-white/10 border border-white/20 hover:bg-white/20 backdrop-blur-sm transition-all">
                            <i class="fas fa-phone mr-2"></i> (336) 835-1993
                        </a>
                    </div>
                </div>
                
                <div class="relative mt-12 lg:mt-0 hidden lg:block reveal active" style="transition-delay: 0.2s;">
                    <div class="absolute inset-0 bg-gradient-to-br from-indigo-500 to-purple-600 rounded-[2.5rem] rotate-3 blur-sm opacity-50"></div>
                    <img src="https://raw.githubusercontent.com/BillLayne/bill-layne-images/617faee947d0b12e42abfd584cd1e9a473c55444/logos/family%20image%20photo.webp" alt="Happy NC Family" class="relative rounded-[2rem] shadow-2xl border-4 border-white/10 w-full object-cover h-[600px]">
                    <div class="absolute bottom-10 -left-10 glass-dark p-6 rounded-2xl flex items-center gap-5 animate-float border border-white/20 shadow-2xl backdrop-blur-xl">
                        <div class="bg-green-500/20 p-4 rounded-full text-green-400"><i class="fas fa-wallet text-2xl"></i></div>
                        <div>
                            <p class="text-xs text-indigo-200 font-bold uppercase tracking-wide">Avg. Savings</p>
                            <p class="text-3xl font-bold text-white tracking-tight">$847/Year</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CARRIER LOGOS -->
    <section class="py-10 bg-white border-b border-slate-100 overflow-hidden">
        <p class="text-center text-[10px] font-bold text-slate-400 uppercase tracking-[0.2em] mb-8">Trusted Carrier Partners</p>
        <div class="relative w-full overflow-hidden">
            <div class="flex animate-marquee whitespace-nowrap items-center w-max">
                <div class="flex gap-20 mx-10 items-center">
                    <img src="https://i.imgur.com/Mv5V7tV.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://i.imgur.com/K6kTnTa.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://github.com/BillLayne/bill-layne-images/blob/main/logos/Travelers%20Logo.webp?raw=true" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://i.imgur.com/HF8oPAF.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://imgur.com/CNFRCZc.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://i.imgur.com/rHIo4r5.jpg" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                </div>
                <!-- Duplicate -->
                <div class="flex gap-20 mx-10 items-center">
                    <img src="https://i.imgur.com/Mv5V7tV.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://i.imgur.com/K6kTnTa.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://github.com/BillLayne/bill-layne-images/blob/main/logos/Travelers%20Logo.webp?raw=true" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://i.imgur.com/HF8oPAF.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://imgur.com/CNFRCZc.png" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                    <img src="https://i.imgur.com/rHIo4r5.jpg" class="h-10 opacity-50 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                </div>
            </div>
        </div>
    </section>

    <!-- COMPARISON -->
    <section class="py-24 bg-indigo-50">
        <div class="max-w-5xl mx-auto px-4 sm:px-6">
            <div class="text-center mb-16 reveal">
                <h2 class="text-3xl md:text-4xl font-display font-extrabold text-slate-900 mb-4">Why Choose Bill Layne?</h2>
                <p class="text-lg text-slate-600 max-w-2xl mx-auto">Independent means we work for you, not the carriers.</p>
            </div>
            <div class="bg-white rounded-[2rem] shadow-xl overflow-hidden border border-slate-100 reveal">
                <div class="grid grid-cols-3 text-center bg-white border-b border-slate-100">
                    <div class="p-6"></div>
                    <div class="p-6 bg-gradient-to-b from-primary-50 to-white border-t-4 border-primary-600 relative">
                        <div class="absolute top-0 right-0 bg-accent-500 text-white text-[10px] font-bold px-3 py-1 rounded-bl-xl shadow-sm">BEST VALUE</div>
                        <p class="text-primary-900 font-bold text-lg md:text-xl">Bill Layne<br>Agency</p>
                    </div>
                    <div class="p-6 bg-slate-50/50 flex flex-col justify-center"><p class="text-slate-500 font-semibold text-lg">Big Box<br>Carriers</p></div>
                </div>
                
                <div class="grid grid-cols-3 border-b border-slate-100 items-center hover:bg-slate-50 transition-colors group">
                    <div class="p-6 text-left font-bold text-slate-700 pl-6 md:pl-10">Carrier Options</div>
                    <div class="p-6 text-center bg-primary-50/30 text-primary-700 font-bold">10+ Brands</div>
                    <div class="p-6 text-center text-slate-300 bg-slate-50/30">Just 1</div>
                </div>
                <div class="grid grid-cols-3 border-b border-slate-100 items-center hover:bg-slate-50 transition-colors group">
                    <div class="p-6 text-left font-bold text-slate-700 pl-6 md:pl-10">Lowest Price</div>
                    <div class="p-6 text-center bg-primary-50/30 text-accent-500 text-2xl"><i class="fas fa-check-circle"></i></div>
                    <div class="p-6 text-center text-slate-300 bg-slate-50/30 text-2xl"><i class="fas fa-times-circle opacity-50"></i></div>
                </div>
                <div class="grid grid-cols-3 items-center hover:bg-slate-50 transition-colors group">
                    <div class="p-6 text-left font-bold text-slate-700 pl-6 md:pl-10">Claims Support</div>
                    <div class="p-6 text-center bg-primary-50/30 text-accent-500 text-2xl"><i class="fas fa-check-circle"></i></div>
                    <div class="p-6 text-center text-slate-300 bg-slate-50/30">None</div>
                </div>
            </div>
        </div>
    </section>

    <!-- SERVICES -->
    <section id="services" class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">
            <div class="text-center mb-16 reveal">
                <span class="text-primary-600 font-bold tracking-wider uppercase text-xs bg-primary-50 px-4 py-1.5 rounded-full border border-primary-100 mb-4 inline-block">Protection</span>
                <h2 class="text-3xl md:text-4xl font-display font-extrabold text-slate-900 mt-4 mb-3">Covering Your World</h2>
                <p class="text-slate-500 text-lg">Comprehensive coverage for everything that matters.</p>
            </div>
            <div class="grid md:grid-cols-2 gap-8 max-w-5xl mx-auto">
                <div class="group relative bg-white rounded-[2.5rem] overflow-hidden border-2 border-indigo-50 hover:border-primary-500 hover:shadow-2xl transition-all duration-500 reveal hover:-translate-y-2">
                    <div class="absolute inset-0 bg-gradient-to-br from-primary-600 to-indigo-700 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="relative p-12 z-10">
                        <div class="w-20 h-20 bg-indigo-50 rounded-3xl flex items-center justify-center text-primary-600 text-4xl mb-8 group-hover:bg-white transition-all">
                            <i class="fas fa-car"></i>
                        </div>
                        <h3 class="text-3xl font-display font-bold text-slate-900 group-hover:text-white transition-colors mb-4">Auto Insurance</h3>
                        <p class="text-slate-600 group-hover:text-indigo-100 mb-8 transition-colors text-lg leading-relaxed">Comprehensive protection for the road. Liability, Collision, and more.</p>
                        <a href="https://billlayne.github.io/Auto-Insurance-Center/" class="inline-flex items-center font-bold text-primary-600 group-hover:text-white transition-colors bg-indigo-50 group-hover:bg-white/20 px-6 py-3 rounded-full">Start Quote <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></a>
                    </div>
                </div>
                <div class="group relative bg-white rounded-[2.5rem] overflow-hidden border-2 border-amber-50 hover:border-accent-500 hover:shadow-2xl transition-all duration-500 reveal hover:-translate-y-2 delay-100">
                    <div class="absolute inset-0 bg-gradient-to-br from-accent-500 to-orange-600 opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                    <div class="relative p-12 z-10">
                        <div class="w-20 h-20 bg-amber-50 rounded-3xl flex items-center justify-center text-accent-600 text-4xl mb-8 group-hover:bg-white transition-all">
                            <i class="fas fa-home"></i>
                        </div>
                        <h3 class="text-3xl font-display font-bold text-slate-900 group-hover:text-white transition-colors mb-4">Home Insurance</h3>
                        <p class="text-slate-600 group-hover:text-orange-100 mb-8 transition-colors text-lg leading-relaxed">Protect your sanctuary. Structure, belongings, and liability.</p>
                        <a href="https://billlayne.github.io/NC-Home-Insurance.github.io/" class="inline-flex items-center font-bold text-accent-600 group-hover:text-white transition-colors bg-amber-50 group-hover:bg-white/20 px-6 py-3 rounded-full">Start Quote <i class="fas fa-arrow-right ml-2 group-hover:translate-x-1 transition-transform"></i></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- CALCULATORS -->
    <section id="tools" class="py-24 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">
            <div class="text-center mb-16 reveal">
                <h2 class="text-3xl md:text-4xl font-display font-extrabold text-slate-900 mb-4">Calculators & Tools</h2>
                <p class="text-slate-500">Analyze your current coverage in seconds.</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 reveal hover:shadow-lg transition-all cursor-pointer">
                    <div class="w-16 h-16 bg-blue-50 text-primary-600 rounded-2xl flex items-center justify-center text-3xl mb-6"><i class="fas fa-calculator"></i></div>
                    <h3 class="text-xl font-bold text-slate-900 mb-2">Coverage Gap Checkup</h3>
                    <p class="text-slate-600 text-sm">Find hidden gaps in your current policy that could cost you thousands.</p>
                </div>
                <div class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 reveal delay-100 hover:shadow-lg transition-all cursor-pointer">
                    <div class="w-16 h-16 bg-amber-50 text-accent-600 rounded-2xl flex items-center justify-center text-3xl mb-6"><i class="fas fa-home"></i></div>
                    <h3 class="text-xl font-bold text-slate-900 mb-2">Home Evaluator</h3>
                    <p class="text-slate-600 text-sm">Ensure your home is insured for its actual replacement value in NC.</p>
                </div>
                <div class="bg-white p-8 rounded-[2.5rem] shadow-sm border border-slate-100 reveal delay-200 hover:shadow-lg transition-all cursor-pointer">
                    <div class="w-16 h-16 bg-purple-50 text-purple-600 rounded-2xl flex items-center justify-center text-3xl mb-6"><i class="fas fa-shield-alt"></i></div>
                    <h3 class="text-xl font-bold text-slate-900 mb-2">Risk Assessment</h3>
                    <p class="text-slate-600 text-sm">A comprehensive review of your assets and liability exposures.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- TEAM -->
    <section class="py-24 bg-white">
        <div class="max-w-7xl mx-auto px-4 sm:px-6">
            <div class="text-center mb-16 reveal">
                <span class="text-indigo-600 font-bold tracking-wider uppercase text-xs bg-indigo-50 px-4 py-1.5 rounded-full border border-indigo-100 mb-4 inline-block">The Team</span>
                <h2 class="text-3xl md:text-5xl font-display font-extrabold text-slate-900 mt-2 mb-4">Meet Your Advocates</h2>
                <p class="text-slate-500 text-lg">Real local agents working for you, not the insurance companies.</p>
            </div>
            
            <div class="flex justify-center reveal">
                <div class="group relative w-full max-w-sm bg-white rounded-3xl overflow-hidden shadow-xl border border-slate-200 transition-all duration-300">
                    <div class="absolute top-0 left-0 w-full h-32 bg-gradient-to-r from-primary-600 to-indigo-700"></div>
                    <div class="relative pt-12 px-8 pb-8 flex flex-col items-center text-center">
                        <div class="relative w-36 h-36 mb-6">
                            <img src="https://i.imgur.com/c7nJZmf.jpeg" alt="Bill Layne" class="w-full h-full rounded-full object-cover object-top border-4 border-white shadow-lg">
                            <div class="absolute bottom-2 right-2 w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white border-2 border-white"><i class="fas fa-check text-xs"></i></div>
                        </div>
                        <h3 class="text-2xl font-bold text-slate-900 mb-1">Bill Layne</h3>
                        <p class="text-primary-600 font-bold text-sm uppercase tracking-wider mb-4">Agency Owner</p>
                        <p class="text-slate-500 text-sm mb-6 leading-relaxed">"I founded this agency in 2004 with one goal: to treat every client like my own family. I'm here to ensure you get the best protection at the best price."</p>
                        <div class="flex gap-3 w-full">
                            <a href="tel:3368351993" class="flex-1 bg-slate-900 text-white py-2.5 rounded-xl font-bold text-sm hover:bg-slate-800 transition-colors flex items-center justify-center gap-2"><i class="fas fa-phone-alt"></i> Call</a>
                            <a href="mailto:Bill@BillLayneInsurance.com" class="flex-1 bg-slate-100 text-slate-700 py-2.5 rounded-xl font-bold text-sm hover:bg-slate-200 transition-colors flex items-center justify-center gap-2"><i class="fas fa-envelope"></i> Email</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- TESTIMONIALS -->
    <section class="py-24 bg-slate-900 text-white relative overflow-hidden">
        <div class="absolute top-0 right-0 w-[600px] h-[600px] bg-primary-600/20 rounded-full blur-[100px] pointer-events-none transform translate-x-1/3 -translate-y-1/3"></div>
        <div class="absolute bottom-0 left-0 w-[500px] h-[500px] bg-accent-600/10 rounded-full blur-[100px] pointer-events-none transform -translate-x-1/3 translate-y-1/3"></div>
        
        <div class="max-w-7xl mx-auto px-4 sm:px-6 relative z-10">
            <div class="text-center mb-16 reveal">
                <h2 class="text-3xl md:text-5xl font-display font-extrabold mb-4">Trusted by Your Neighbors</h2>
                <div class="flex justify-center gap-1 text-accent-400 text-xl mb-4"><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i></div>
                <p class="text-slate-400 font-medium tracking-wide uppercase text-sm">Based on 200+ 5-Star Reviews</p>
            </div>
            <div class="grid md:grid-cols-3 gap-8">
                <div class="glass-dark p-8 rounded-3xl hover:bg-white/10 transition-colors reveal">
                    <p class="text-lg text-slate-300 mb-8 leading-relaxed">"Bill saved us <strong class="text-white bg-primary-600/30 px-1 rounded">$823 a year</strong>! He took the time to explain everything clearly."</p>
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-primary-400 to-primary-600 flex items-center justify-center font-bold text-white shadow-lg">SM</div>
                        <div><p class="font-bold text-white">Sarah M.</p><p class="text-xs text-slate-400 uppercase tracking-wider">Elkin, NC</p></div>
                    </div>
                </div>
                <div class="glass-dark p-8 rounded-3xl hover:bg-white/10 transition-colors reveal delay-100">
                    <p class="text-lg text-slate-300 mb-8 leading-relaxed">"Saved over $1,100 switching. When a tree hit our house, Bill was there immediately to help."</p>
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-accent-400 to-accent-600 flex items-center justify-center font-bold text-white shadow-lg">MT</div>
                        <div><p class="font-bold text-white">Mike T.</p><p class="text-xs text-slate-400 uppercase tracking-wider">Mount Airy, NC</p></div>
                    </div>
                </div>
                <div class="glass-dark p-8 rounded-3xl hover:bg-white/10 transition-colors reveal delay-200">
                    <p class="text-lg text-slate-300 mb-8 leading-relaxed">"Finally an agent who answers the phone! Personal service you just don't get anymore."</p>
                    <div class="flex items-center gap-4">
                        <div class="w-12 h-12 rounded-full bg-gradient-to-br from-indigo-400 to-indigo-600 flex items-center justify-center font-bold text-white shadow-lg">JR</div>
                        <div><p class="font-bold text-white">Jennifer R.</p><p class="text-xs text-slate-400 uppercase tracking-wider">Jonesville, NC</p></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- MAP -->
    <section class="py-24 bg-slate-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="text-center mb-16 reveal">
                <h2 class="text-3xl font-extrabold text-slate-900 mb-2">Serving North Carolina</h2>
                <p class="text-slate-600">Local expertise in Surry, Wilkes, and Yadkin Counties.</p>
            </div>
            <div class="rounded-[2rem] overflow-hidden shadow-2xl h-96 relative z-10 border-8 border-white reveal">
                <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3211.787496143644!2d-80.8511886847229!3d36.24764598006612!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8853b6a6c3210521%3A0xe6b0e4412f6f2c6!2sBill%20Layne%20Insurance%20Agency!5e0!3m2!1sen!2sus!4v1646145689123!5m2!1sen!2sus" width="100%" height="100%" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
            </div>
        </div>
    </section>

    <!-- SOCIAL MEDIA -->
    <section class="py-24 bg-white border-t border-slate-100">
        <div class="max-w-7xl mx-auto px-4 text-center reveal">
            <h2 class="text-3xl font-display font-extrabold text-slate-900 mb-12">Join Our Community</h2>
            <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
                <a href="https://www.facebook.com/dollarbillagency/" target="_blank" class="p-8 rounded-3xl bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white transition-all transform hover:-translate-y-2 group">
                    <i class="fab fa-facebook-f text-4xl mb-4"></i>
                    <p class="font-bold">Facebook</p>
                </a>
                <a href="https://www.youtube.com/@ncautoandhome" target="_blank" class="p-8 rounded-3xl bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition-all transform hover:-translate-y-2 group">
                    <i class="fab fa-youtube text-4xl mb-4"></i>
                    <p class="font-bold">YouTube</p>
                </a>
                <a href="https://www.instagram.com/ncautoandhome/" target="_blank" class="p-8 rounded-3xl bg-pink-50 text-pink-600 hover:bg-pink-600 hover:text-white transition-all transform hover:-translate-y-2 group">
                    <i class="fab fa-instagram text-4xl mb-4"></i>
                    <p class="font-bold">Instagram</p>
                </a>
                <a href="https://x.com/shopsavecompare" target="_blank" class="p-8 rounded-3xl bg-slate-50 text-slate-800 hover:bg-slate-900 hover:text-white transition-all transform hover:-translate-y-2 group">
                    <i class="fab fa-x-twitter text-4xl mb-4"></i>
                    <p class="font-bold">X (Twitter)</p>
                </a>
            </div>
        </div>
    </section>

    <!-- FAQ -->
    <section class="py-24 bg-slate-50">
        <div class="max-w-3xl mx-auto px-4 reveal">
            <h2 class="text-3xl font-display font-bold text-center mb-10 text-slate-900">Common Questions</h2>
            <div class="space-y-4">
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                    <button class="accordion-btn w-full px-8 py-5 text-left flex justify-between items-center font-bold text-slate-800 hover:bg-slate-50 transition-colors">How much can I save?<i class="fas fa-chevron-down text-primary-500 transition-transform"></i></button>
                    <div class="accordion-content px-8 pb-6 text-slate-600 border-t border-slate-50 pt-4">Average savings are $847/year. We shop multiple carriers to find the best rate for your specific needs.</div>
                </div>
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                    <button class="accordion-btn w-full px-8 py-5 text-left flex justify-between items-center font-bold text-slate-800 hover:bg-slate-50 transition-colors">Is there a fee for quotes?<i class="fas fa-chevron-down text-primary-500 transition-transform"></i></button>
                    <div class="accordion-content px-8 pb-6 text-slate-600 border-t border-slate-50 pt-4">Never. Quotes are 100% free with zero obligation.</div>
                </div>
                <div class="bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden">
                    <button class="accordion-btn w-full px-8 py-5 text-left flex justify-between items-center font-bold text-slate-800 hover:bg-slate-50 transition-colors">Do you offer SR-22 insurance?<i class="fas fa-chevron-down text-primary-500 transition-transform"></i></button>
                    <div class="accordion-content px-8 pb-6 text-slate-600 border-t border-slate-50 pt-4">Yes, we specialize in high-risk and SR-22 filings. We can often get you covered same-day.</div>
                </div>
            </div>
        </div>
    </section>

    <!-- CALL TO ACTION -->
    <section class="py-24 bg-gradient-to-br from-primary-600 to-indigo-800 text-white text-center relative overflow-hidden">
        <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20 mix-blend-overlay"></div>
        <div class="max-w-4xl mx-auto px-4 relative z-10 reveal">
            <h2 class="text-4xl md:text-5xl font-display font-extrabold mb-6 tracking-tight">Stop Overpaying Today.</h2>
            <p class="text-xl text-indigo-100 mb-12 max-w-2xl mx-auto">It takes just 2 minutes to potentially save hundreds on your policy.</p>
            <div class="flex flex-col sm:flex-row gap-5 justify-center">
                <a href="tel:3368351993" class="bg-white text-primary-700 px-10 py-5 rounded-full font-bold text-lg hover:bg-indigo-50 shadow-2xl transition-transform hover:scale-105">Call Now</a>
                <a href="https://billlayneinsurance.com/get-quote" class="bg-transparent border-2 border-white/30 hover:border-white px-10 py-5 rounded-full font-bold text-lg text-white transition-all backdrop-blur-sm btn-shine">Online Quote</a>
            </div>
        </div>
    </section>

    <!-- EMAIL CAPTURE -->
    <section class="py-20 bg-slate-50">
        <div class="max-w-xl mx-auto px-4 text-center reveal">
            <h3 class="text-2xl font-bold text-slate-900 mb-2">Free Savings Guide</h3>
            <p class="text-slate-600 mb-6">Get insurance tips and local news delivered to your inbox.</p>
            <form id="email-form" class="flex gap-2">
                <input type="email" placeholder="Your email address" required class="flex-1 px-6 py-3 rounded-full border border-slate-200 outline-none focus:border-primary-500">
                <button type="submit" class="bg-primary-600 text-white px-8 py-3 rounded-full font-bold hover:bg-primary-700 transition-colors">Send</button>
            </form>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="bg-slate-900 text-slate-400 py-16 pb-32 md:pb-16 border-t border-slate-800">
        <div class="max-w-7xl mx-auto px-4 grid md:grid-cols-4 gap-12">
            <div>
                <h4 class="text-white font-bold text-xl mb-6 font-display tracking-tight">Bill Layne Insurance</h4>
                <p class="text-sm leading-relaxed">Protecting families in North Carolina since 2004. We are your local, trusted, and independent agency.</p>
            </div>
            <div>
                <h5 class="text-white font-bold mb-6">Contact</h5>
                <ul class="text-sm space-y-4">
                    <li><a href="tel:3368351993" class="hover:text-white transition-colors"><i class="fas fa-phone-alt text-primary-500 mr-2"></i>(336) 835-1993</a></li>
                    <li><i class="fas fa-map-marker-alt text-primary-500 mr-2"></i>1283 N Bridge St, Elkin</li>
                </ul>
            </div>
            <div>
                <h5 class="text-white font-bold mb-6">Quick Links</h5>
                <ul class="text-sm space-y-3">
                    <li><a href="https://billlayne.github.io/Auto-Insurance-Center/" class="hover:text-white transition-colors">Auto Insurance</a></li>
                    <li><a href="https://billlayne.github.io/NC-Home-Insurance.github.io/" class="hover:text-white transition-colors">Home Insurance</a></li>
                    <li><a href="contact-us.html" class="hover:text-white transition-colors">Contact Us</a></li>
                </ul>
            </div>
            <div>
                <h5 class="text-white font-bold mb-6">Service Areas</h5>
                <p class="text-sm leading-loose">Elkin â€¢ Mount Airy â€¢ Jonesville â€¢ Wilkesboro â€¢ Dobson â€¢ Yadkinville â€¢ Statewide NC</p>
            </div>
        </div>
        <div class="max-w-7xl mx-auto px-4 mt-12 pt-8 border-t border-slate-800 text-center text-xs">
            &copy; 2025 Bill Layne Insurance Agency. All Rights Reserved.
        </div>
    </footer>

    <!-- MOBILE BOTTOM DOCK -->
    <div class="md:hidden fixed bottom-0 left-0 w-full z-[60] glass-nav border-t border-slate-200 shadow-xl pb-safe">
        <div class="grid grid-cols-3 h-16 items-center">
            <a href="tel:3368351993" class="flex flex-col items-center justify-center h-full text-slate-600">
                <i class="fas fa-phone-alt text-lg"></i>
                <span class="text-[10px] font-bold mt-1">Call</span>
            </a>
            <div class="relative flex justify-center items-center">
                <a href="https://billlayneinsurance.com/get-quote" class="absolute -top-8 w-14 h-14 bg-gradient-to-br from-primary-600 to-indigo-600 rounded-full shadow-lg border-4 border-white flex items-center justify-center text-white text-xl animate-pulse-glow">
                    <i class="fas fa-calculator"></i>
                </a>
                <span class="text-[10px] font-bold text-primary-700 mt-10">Quote</span>
            </div>
            <button id="mobile-chat-btn" class="flex flex-col items-center justify-center h-full text-slate-600">
                <i class="fas fa-robot text-lg"></i>
                <span class="text-[10px] font-bold mt-1">Chat</span>
            </button>
        </div>
    </div>

    <!-- AI CHAT WIDGET -->
    <div id="ai-chat-container" class="fixed bottom-24 right-6 z-50 flex flex-col items-end pointer-events-none">
        <div id="chat-window" class="chat-closed bg-white w-80 md:w-96 h-[500px] rounded-2xl shadow-2xl border border-slate-200 flex flex-col mb-4 overflow-hidden origin-bottom-right transition-all duration-300">
            <div class="bg-gradient-to-r from-primary-600 to-indigo-800 p-4 flex justify-between items-center text-white">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-white/20 flex items-center justify-center backdrop-blur-sm border border-white/10"><i class="fas fa-robot text-sm"></i></div>
                    <div>
                        <span class="font-bold text-sm block">Bill Layne AI</span>
                        <span class="text-[10px] opacity-90 flex items-center gap-1.5 font-medium"><span class="w-2 h-2 rounded-full bg-green-400 animate-pulse"></span> Online</span>
                    </div>
                </div>
                <button id="close-chat" class="hover:bg-white/20 rounded-full p-2 w-8 h-8 flex items-center justify-center"><i class="fas fa-times"></i></button>
            </div>
            <div id="chat-messages" class="flex-1 p-4 bg-slate-50 overflow-y-auto space-y-4 scroll-smooth">
                <div class="flex gap-3">
                    <div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 text-primary-600 mt-1"><i class="fas fa-robot text-xs"></i></div>
                    <div class="bg-white text-slate-700 border border-slate-200 rounded-tl-none p-3.5 rounded-2xl shadow-sm text-sm max-w-[85%] leading-relaxed">ðŸ‘‹ Hi! I'm Bill Layne's AI. I can help with quotes & coverage questions.</div>
                </div>
            </div>
            <div class="p-3 bg-white border-t border-slate-100">
                <form id="chat-form" class="flex gap-2">
                    <input type="text" id="chat-input" placeholder="Ask about coverage..." class="flex-1 bg-slate-50 border border-slate-200 rounded-full px-5 py-3 text-sm focus:outline-none focus:border-primary-500 transition-all">
                    <button type="submit" class="bg-primary-600 text-white w-11 h-11 rounded-full flex items-center justify-center hover:bg-primary-700 shadow-md transition-all hover:scale-105"><i class="fas fa-paper-plane text-sm"></i></button>
                </form>
            </div>
        </div>
        <button id="desktop-chat-toggle" class="hidden md:flex items-center justify-center w-16 h-16 bg-gradient-to-br from-primary-600 to-indigo-600 text-white rounded-full shadow-xl shadow-primary-500/40 hover:scale-110 transition-all group pointer-events-auto">
            <i class="fas fa-robot text-2xl animate-pulse"></i>
        </button>
    </div>

    <!-- MAIN LOGIC -->
    <script type="importmap">
{
  "imports": {
    "@google/genai": "https://esm.sh/@google/genai@1.33.0",
    "react": "https://esm.sh/react@^19.2.3",
    "react-dom/": "https://esm.sh/react-dom@^19.2.3/",
    "react/": "https://esm.sh/react@^19.2.3/"
  }
}
</script>
    <script type="module">
        import { GoogleGenAI } from "@google/genai";

        document.addEventListener('DOMContentLoaded', () => {
            // Sticky Nav Logic
            const navbar = document.getElementById('navbar');
            const logoText = document.getElementById('logo-text');
            const logoAccent = document.getElementById('logo-accent');
            const logoTagline = document.getElementById('logo-tagline');
            const hamburgers = document.querySelectorAll('.hamburger-line');
            const menuBtn = document.getElementById('menu-btn');

            window.addEventListener('scroll', () => {
                if (window.scrollY > 20) {
                    navbar.classList.add('glass-nav', 'h-20', 'shadow-sm');
                    navbar.classList.remove('bg-transparent', 'h-24');
                    logoText.classList.replace('text-white', 'text-slate-900');
                    logoAccent.classList.replace('text-accent-400', 'text-primary-600');
                    logoTagline.classList.replace('text-indigo-200', 'text-slate-400');
                    hamburgers.forEach(el => el.classList.replace('bg-white', 'bg-slate-900'));
                } else {
                    navbar.classList.remove('glass-nav', 'h-20', 'shadow-sm');
                    navbar.classList.add('bg-transparent', 'h-24');
                    logoText.classList.replace('text-slate-900', 'text-white');
                    logoAccent.classList.replace('text-primary-600', 'text-accent-400');
                    logoTagline.classList.replace('text-slate-400', 'text-indigo-200');
                    hamburgers.forEach(el => el.classList.replace('bg-slate-900', 'bg-white'));
                }
            });

            // Business Status Dot
            function updateStatus() {
                const now = new Date();
                const estTime = new Date(now.toLocaleString("en-US", {timeZone: "America/New_York"}));
                const day = estTime.getDay();
                const hour = estTime.getHours();
                const isOpen = (day >= 1 && day <= 5) && (hour >= 9 && hour < 17);
                const dot = document.getElementById('status-dot');
                if (dot) dot.classList.toggle('hidden', !isOpen);
            }
            updateStatus(); setInterval(updateStatus, 60000);

            // Mobile Menu Drawer
            const drawer = document.getElementById('menu-drawer');
            const overlay = document.getElementById('menu-overlay');
            const toggleMenu = (show) => {
                drawer.classList.toggle('translate-x-full', !show);
                overlay.classList.toggle('opacity-0', !show);
                overlay.classList.toggle('pointer-events-none', !show);
            };
            document.getElementById('menu-btn').addEventListener('click', () => toggleMenu(true));
            document.getElementById('menu-close').addEventListener('click', () => toggleMenu(false));
            overlay.addEventListener('click', () => toggleMenu(false));

            // FAQ Accordion
            document.querySelectorAll('.accordion-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const content = btn.nextElementSibling;
                    const icon = btn.querySelector('.fa-chevron-down');
                    const isOpen = content.classList.contains('open');
                    content.style.maxHeight = isOpen ? null : content.scrollHeight + "px";
                    content.classList.toggle('open');
                    icon.style.transform = isOpen ? 'rotate(0deg)' : 'rotate(180deg)';
                });
            });

            // Reveal animations on scroll
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => { if (entry.isIntersecting) entry.target.classList.add('active'); });
            }, { threshold: 0.1 });
            document.querySelectorAll('.reveal').forEach(el => observer.observe(el));

            // CHAT LOGIC (Gemini 3 Flash)
            const chatWindow = document.getElementById('chat-window');
            const chatToggle = document.getElementById('desktop-chat-toggle');
            const mobileChatBtn = document.getElementById('mobile-chat-btn');
            const closeChat = document.getElementById('close-chat');
            const chatForm = document.getElementById('chat-form');
            const chatInput = document.getElementById('chat-input');
            const chatMessages = document.getElementById('chat-messages');

            const toggleChat = () => {
                const isOpen = chatWindow.classList.contains('chat-open');
                chatWindow.classList.toggle('chat-open', !isOpen);
                chatWindow.classList.toggle('chat-closed', isOpen);
                if (!isOpen) setTimeout(() => chatInput.focus(), 300);
            };

            chatToggle.addEventListener('click', toggleChat);
            mobileChatBtn.addEventListener('click', toggleChat);
            closeChat.addEventListener('click', toggleChat);

            const appendMsg = (role, text) => {
                const div = document.createElement('div');
                div.className = `flex gap-3 ${role === 'user' ? 'justify-end' : ''}`;
                div.innerHTML = `
                    ${role === 'model' ? '<div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center flex-shrink-0 text-primary-600 mt-1"><i class="fas fa-robot text-xs"></i></div>' : ''}
                    <div class="p-3.5 rounded-2xl shadow-sm text-sm max-w-[85%] leading-relaxed ${role === 'user' ? 'bg-primary-600 text-white rounded-tr-none' : 'bg-white text-slate-700 border border-slate-200 rounded-tl-none'}">${text}</div>
                `;
                chatMessages.appendChild(div);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            };

            chatForm.addEventListener('submit', async (e) => {
                e.preventDefault();
                const text = chatInput.value.trim();
                if (!text) return;
                chatInput.value = '';
                appendMsg('user', text);

                const thinking = document.createElement('div');
                thinking.className = 'flex gap-3 animate-pulse';
                thinking.innerHTML = `<div class="w-8 h-8 bg-primary-100 rounded-full flex items-center justify-center text-primary-600 mt-1"><i class="fas fa-robot text-xs"></i></div><div class="bg-white p-3 rounded-2xl shadow-sm border border-slate-200 text-slate-500 text-xs">Thinking...</div>`;
                chatMessages.appendChild(thinking);
                chatMessages.scrollTop = chatMessages.scrollHeight;

                try {
                    const ai = new GoogleGenAI({ apiKey: "/* process.env.API_KEY is handled automatically */" });
                    const response = await ai.models.generateContent({
                        model: "gemini-3-flash-preview",
                        contents: text,
                        config: {
                            systemInstruction: "You are the AI for Bill Layne Insurance in Elkin, NC. Phone: (336) 835-1993. Address: 1283 N Bridge St. Be helpful and neighborly. Emphasize that we are independent and shop 10+ carriers to save families $847/yr avg. Major partners: Travelers, Progressive, Nationwide.",
                            temperature: 0.7
                        }
                    });
                    thinking.remove();
                    appendMsg('model', response.text || "I'm sorry, I'm having trouble thinking. Please call us at (336) 835-1993!");
                } catch (err) {
                    thinking.remove();
                    appendMsg('model', "I'm having trouble connecting right now. Please call us directly at (336) 835-1993 for immediate help!");
                }
            });
            
            // Email Capture Form
            document.getElementById('email-form').addEventListener('submit', (e) => {
                e.preventDefault();
                alert('Thank you! Your savings guide will be sent shortly.');
                e.target.reset();
            });
        });
    </script>
</body>
</html>
